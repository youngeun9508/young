<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì•„ì´ë‘ í•œê¸€ ë†€ì´</title>
    <style>
        body { margin: 0; font-family: 'Nanum Gothic', sans-serif; background-color: #f0f8ff; overflow: hidden; touch-action: none; }
        #app { display: flex; flex-direction: column; height: 100vh; }
        
        /* ìº”ë²„ìŠ¤ ì˜ì—­ */
        #draw-area { flex: 1; position: relative; background: white; border-bottom: 5px solid #ffcc00; }
        canvas { width: 100%; height: 100%; touch-action: none; }

        /* ê¸€ì ì„ íƒì°½ */
        #char-bank { height: 35%; background: #fff9c4; display: flex; flex-wrap: wrap; justify-content: center; padding: 10px; overflow-y: auto; gap: 8px; }
        .char-btn { 
            width: 50px; height: 50px; background: white; border: 2px solid #ffa000; border-radius: 10px;
            display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold;
            cursor: pointer; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); user-select: none;
        }

        /* ì»¨íŠ¸ë¡¤ ë©”ë‰´ */
        #controls { position: absolute; top: 10px; right: 10px; display: flex; gap: 10px; }
        .btn { padding: 10px 15px; border-radius: 20px; border: none; font-weight: bold; cursor: pointer; color: white; }
        .btn-clear { background: #f44336; }
        .btn-read { background: #4caf50; }
    </style>
</head>
<body>

<div id="app">
    <div id="draw-area">
        <canvas id="mainCanvas"></canvas>
        <div id="controls">
            <button class="btn btn-read" onclick="speakText()">ğŸ“£ ì½ì–´ì£¼ê¸°</button>
            <button class="btn btn-clear" onclick="clearCanvas()">â™»ï¸ ë‹¤ì‹œí•˜ê¸°</button>
        </div>
    </div>

    <div id="char-bank" id="alphabet">
        <div class="char-btn" onclick="addText('ã„±')">ã„±</div>
        <div class="char-btn" onclick="addText('ã„´')">ã„´</div>
        <div class="char-btn" onclick="addText('ã„·')">ã„·</div>
        <div class="char-btn" onclick="addText('ã„¹')">ã„¹</div>
        <div class="char-btn" onclick="addText('ã…')">ã…</div>
        <div class="char-btn" onclick="addText('ã…‚')">ã…‚</div>
        <div class="char-btn" onclick="addText('ã……')">ã……</div>
        <div class="char-btn" onclick="addText('ã…‡')">ã…‡</div>
        <div class="char-btn" onclick="addText('ã…ˆ')">ã…ˆ</div>
        <div class="char-btn" onclick="addText('ã…Š')">ã…Š</div>
        <div class="char-btn" onclick="addText('ã…‹')">ã…‹</div>
        <div class="char-btn" onclick="addText('ã…Œ')">ã…Œ</div>
        <div class="char-btn" onclick="addText('ã…')">ã…</div>
        <div class="char-btn" onclick="addText('ã…')">ã…</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…')">ã…</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…‘')">ã…‘</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…“')">ã…“</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…•')">ã…•</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…—')">ã…—</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…›')">ã…›</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…œ')">ã…œ</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã… ')">ã… </div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…¡')">ã…¡</div>
        <div class="char-btn" style="border-color: #2196f3;" onclick="addText('ã…£')">ã…£</div>
    </div>
</div>

<script>
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');
    let currentText = "";

    // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight * 0.65;
    }
    window.addEventListener('resize', resize);
    resize();

    // ê·¸ë¦¬ê¸° ê¸°ëŠ¥
    let drawing = false;
    canvas.addEventListener('pointerdown', () => drawing = true);
    canvas.addEventListener('pointerup', () => { drawing = false; ctx.beginPath(); });
    canvas.addEventListener('pointermove', draw);

    function draw(e) {
        if (!drawing) return;
        ctx.lineWidth = 5;
        ctx.lineCap = 'round';
        ctx.strokeStyle = '#333';
        ctx.lineTo(e.clientX, e.clientY);
        ctx.stroke();
    }

    // ê¸€ì ì¶”ê°€
    function addText(char) {
        currentText += char;
        ctx.font = "bold 80px Nanum Gothic";
        ctx.fillStyle = "#FF5722";
        // ê¸€ìë¥¼ ìˆœì°¨ì ìœ¼ë¡œ í™”ë©´ì— ê·¸ë¦¼
        const xPos = (currentText.length * 70) % (canvas.width - 50);
        const yPos = 150 + (Math.floor((currentText.length * 70) / canvas.width) * 100);
        ctx.fillText(char, xPos, yPos);
    }

    // ì´ˆê¸°í™”
    function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        currentText = "";
    }

    // ìŒì„± ì½ì–´ì£¼ê¸° (TTS)
    function speakText() {
        if (!currentText) return;
        const msg = new SpeechSynthesisUtterance();
        msg.text = currentText;
        msg.lang = 'ko-KR';
        msg.rate = 0.8; // ì•„ì´ë“¤ì´ ë“£ê¸° ì¢‹ê²Œ ì•½ê°„ ì²œì²œíˆ
        window.speechSynthesis.speak(msg);
    }
</script>

</body>
</html>
